<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIéŸ³å£°ãƒ¢ãƒ‡ãƒ«ã€Œã‚¨ã‚¤ãƒ€ã€é–‹ç™ºãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ | ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¬ãƒãƒ¼ãƒˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals (Stone, Teal Accent) -->
    <!-- Application Structure Plan: A single-page dashboard with sticky sidebar navigation (Overview, Plan, Journey, Deliverables). This thematic structure transforms the static project report into an explorable story, prioritizing user flow over the original document's linear order. Key interactions include a collapsible WBS, a dynamic Gantt-style chart for the schedule, and an interactive timeline for the issue log, making the project's process and challenges easily digestible. Gemini API features for summary and issue analysis are added to transform the report into a learning and analysis tool. A new "Procedures" section with copyable commands is added to the Plan section for practical reproducibility. -->
    <!-- Visualization & Content Choices: 
        - Report Info: WBS -> Goal: Organize -> Viz: Interactive collapsible list (HTML/JS) -> Interaction: Click to expand/collapse phases -> Justification: Manages complexity of the hierarchical data.
        - Report Info: Schedule -> Goal: Visualize Time -> Viz: Horizontal Bar Chart (Chart.js Canvas) -> Interaction: Hover for details -> Justification: Provides an intuitive Gantt-like view of the project timeline.
        - Report Info: Issue Log -> Goal: Tell a Story -> Viz: Vertical Timeline Cards (HTML/CSS) -> Interaction: Click to reveal resolution, Click "Analyze with AI" button -> Justification: Transforms a dense table into an engaging narrative and a learning tool via Gemini API.
        - Report Info: Project Data Synthesis -> Goal: Analyze & Summarize -> Viz: Modal with AI-generated text -> Interaction: Button click to generate project post-mortem -> Justification: Provides high-level insights on demand using Gemini API.
        - Report Info: Work Procedures -> Goal: Instruct -> Viz: List of command blocks (HTML/JS) -> Interaction: Copy-to-clipboard button -> Justification: Provides actionable steps for reproducing the project. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f8fafc; /* slate-50 */
            color: #334155; /* slate-700 */
        }
        .section-title {
            border-bottom: 2px solid #0d9488; /* teal-600 */
        }
        .nav-link.active {
            background-color: #ccfbf1; /* teal-100 */
            color: #0f766e; /* teal-700 */
            font-weight: 700;
        }
        .wbs-toggle::before {
            content: 'â–¶';
            display: inline-block;
            margin-right: 0.5rem;
            transition: transform 0.2s;
            font-size: 0.7em;
        }
        .wbs-toggle.open::before {
            transform: rotate(90deg);
        }
        .issue-card {
            transition: all 0.3s ease;
            border-left-width: 4px;
        }
        .issue-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
            height: 500px;
            max-height: 70vh;
        }
        .modal-bg {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: all 0.3s ease;
        }
        .spinner {
            border-color: #f3f3f3;
            border-top-color: #0d9488;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .code-block {
            position: relative;
        }
        .copy-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background-color: #e2e8f0;
            color: #475569;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .copy-btn:hover {
            background-color: #cbd5e1;
        }
        .code-path {
            color: #94a3b8; /* slate-400 */
            -webkit-user-select: none; /* Safari */
            -ms-user-select: none; /* IE 10+ */
            user-select: none; /* Standard syntax */
        }
    </style>
</head>
<body class="bg-slate-50">

    <div class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-slate-800">AIéŸ³å£°ãƒ¢ãƒ‡ãƒ«ã€Œã‚¨ã‚¤ãƒ€ã€é–‹ç™ºãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</h1>
            <p class="mt-4 text-lg text-slate-600">ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¬ãƒãƒ¼ãƒˆ</p>
        </header>

        <div class="lg:grid lg:grid-cols-4 lg:gap-8">
            <nav id="sidebar" class="lg:col-span-1 lg:sticky top-8 self-start mb-8 lg:mb-0">
                <ul class="space-y-2">
                    <li><a href="#ai-insights" class="nav-link block p-3 rounded-lg hover:bg-slate-200 transition-colors">âœ¨ AIåˆ†æ</a></li>
                    <li><a href="#overview" class="nav-link block p-3 rounded-lg hover:bg-slate-200 transition-colors">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦</a></li>
                    <li><a href="#plan" class="nav-link block p-3 rounded-lg hover:bg-slate-200 transition-colors">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨ˆç”»</a></li>
                    <li><a href="#journey" class="nav-link block p-3 rounded-lg hover:bg-slate-200 transition-colors">é–‹ç™ºã®è»Œè·¡ï¼ˆèª²é¡Œç®¡ç†ï¼‰</a></li>
                    <li><a href="#deliverables" class="nav-link block p-3 rounded-lg hover:bg-slate-200 transition-colors">æœ€çµ‚æˆæœç‰©</a></li>
                </ul>
            </nav>

            <main class="lg:col-span-3 space-y-16">
                
                <section id="ai-insights">
                    <h2 class="section-title text-3xl font-bold pb-2 mb-6 text-slate-800">âœ¨ AIã«ã‚ˆã‚‹åˆ†æ</h2>
                    <p class="mb-6 text-slate-600 leading-relaxed">
                        ã“ã®ãƒ¬ãƒãƒ¼ãƒˆã®ãƒ‡ãƒ¼ã‚¿ã‚’æ´»ç”¨ã—ã€Gemini APIã«ã‚ˆã‚‹AIåˆ†æã‚’ä½“é¨“ã§ãã¾ã™ã€‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®ã‚µãƒãƒªãƒ¼ã‚’ç”Ÿæˆã—ãŸã‚Šã€å„é–‹ç™ºèª²é¡Œã®è©³ç´°ãªåˆ†æã‚’è¡Œã£ãŸã‚Šã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚
                    </p>
                    <div class="bg-white p-6 rounded-lg shadow-md border-t-4 border-teal-500">
                        <h3 class="text-xl font-bold mb-3 text-slate-700">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç·æ‹¬ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ</h3>
                        <p class="text-slate-600 mb-4">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®è¨ˆç”»ã€ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã€ç™ºç”Ÿã—ãŸèª²é¡Œã‚’åŸºã«ã€AIãŒãƒã‚¹ãƒˆãƒ¢ãƒ¼ãƒ†ãƒ ï¼ˆäº‹å¾Œæ¤œè¨¼ï¼‰ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆã—ã¾ã™ã€‚</p>
                        <button id="generate-summary-btn" class="bg-teal-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-teal-700 transition-colors">
                            âœ¨ AIã«ã‚ˆã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚µãƒãƒªãƒ¼ã‚’ç”Ÿæˆ
                        </button>
                    </div>
                </section>

                <section id="overview">
                    <h2 class="section-title text-3xl font-bold pb-2 mb-6 text-slate-800">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦</h2>
                    <p class="mb-8 text-slate-600 leading-relaxed">
                        ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç›®çš„ã¯ã€ç‰¹å®šã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã€Œã‚¨ã‚¤ãƒ€ã€ã®å£°è³ªã‚’å¿ å®Ÿã«å†ç¾ã—ãŸé«˜å“è³ªãªæ—¥æœ¬èªãƒ†ã‚­ã‚¹ãƒˆèª­ã¿ä¸Šã’(TTS)ãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ã™ã‚‹ã“ã¨ã§ã™ã€‚å‹•ç”»ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç­‰ã®å‰µä½œæ´»å‹•ã¸ã®æ´»ç”¨ã¨ã€AIéŸ³å£°åˆæˆæŠ€è¡“ã®å®Ÿè·µçš„å­¦ç¿’ã‚’èƒŒæ™¯ã«ã€VITSãƒ¢ãƒ‡ãƒ«ã¨é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç¾¤ã‚’ä¸»è¦ãªæˆæœç‰©ã¨ã—ã¦é–‹ç™ºã‚’é€²ã‚ã¾ã—ãŸã€‚
                    </p>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="bg-white p-6 rounded-lg shadow-md border-t-4 border-teal-500">
                            <h3 class="text-xl font-bold mb-3 text-slate-700">æ©Ÿèƒ½è¦ä»¶</h3>
                            <ul class="list-disc list-inside space-y-2 text-slate-600">
                                <li>éŸ³å£°ãƒ‡ãƒ¼ã‚¿ã®å½¢å¼å¤‰æ› (22050Hz, ãƒ¢ãƒãƒ©ãƒ«)</li>
                                <li>ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿è‡ªå‹•ç”Ÿæˆ (`ãƒ•ã‚¡ã‚¤ãƒ«å|æ–‡ç« |æ–‡ç« `å½¢å¼)</li>
                                <li>ãƒ†ã‚­ã‚¹ãƒˆã®ã²ã‚‰ãŒãªåŒ–</li>
                                <li>Coqui-TTSã«ã‚ˆã‚‹VITSãƒ¢ãƒ‡ãƒ«å­¦ç¿’</li>
                                <li>ä»»æ„ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰ã®éŸ³å£°åˆæˆ (WAVå‡ºåŠ›)</li>
                            </ul>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-md border-t-4 border-amber-500">
                            <h3 class="text-xl font-bold mb-3 text-slate-700">éæ©Ÿèƒ½è¦ä»¶</h3>
                            <ul class="list-disc list-inside space-y-2 text-slate-600">
                                <li><strong>OS:</strong> Ubuntu Linux 22.04</li>
                                <li><strong>ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢:</strong> NVIDIAè£½GPUå¿…é ˆ</li>
                                <li><strong>ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢:</strong> Python 3.10, Coqui-TTS</li>
                                <li><strong>å“è³ª:</strong> ãƒã‚¤ã‚ºãŒå°‘ãªãæ˜ç­ãªéŸ³å£°</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <section id="plan">
                    <h2 class="section-title text-3xl font-bold pb-2 mb-6 text-slate-800">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨ˆç”»</h2>
                    <p class="mb-8 text-slate-600 leading-relaxed">
                        ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€WBS(ä½œæ¥­åˆ†è§£æ§‹æˆå›³)ã«åŸºã¥ãè¨ˆç”»ã•ã‚Œã¾ã—ãŸã€‚å„ã‚¿ã‚¹ã‚¯ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ä»¥ä¸‹ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã§ç¤ºã•ã‚Œã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®æµã‚Œã¨æœŸé–“ã‚’å¯è¦–åŒ–ã—ã¦ã„ã¾ã™ã€‚å…·ä½“çš„ãªä½œæ¥­æ‰‹é †ã‚‚å«ã¾ã‚Œã¦ãŠã‚Šã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å†ç¾æ€§ã‚’é«˜ã‚ã¾ã™ã€‚
                    </p>
                    <div class="space-y-8">
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-xl font-bold mb-4 text-slate-700">WBS (ä½œæ¥­åˆ†è§£æ§‹æˆå›³)</h3>
                            <p class="text-sm text-slate-500 mb-4">ã‚¯ãƒªãƒƒã‚¯ã§è©³ç´°ã‚’å±•é–‹/æŠ˜ã‚ŠãŸãŸã¿</p>
                            <ul id="wbs-list" class="space-y-2 text-slate-600">
                            </ul>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-xl font-bold mb-4 text-slate-700">å…·ä½“çš„ãªä½œæ¥­æ‰‹é †</h3>
                            <div id="procedures-container" class="space-y-4">
                                <!-- Procedures will be injected by JS -->
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-xl font-bold mb-4 text-slate-700">ä½œæ¥­è¨ˆç”»ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³</h3>
                            <div class="chart-container">
                                <canvas id="scheduleChart"></canvas>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="journey">
                    <h2 class="section-title text-3xl font-bold pb-2 mb-6 text-slate-800">é–‹ç™ºã®è»Œè·¡ï¼ˆèª²é¡Œç®¡ç†ï¼‰</h2>
                    <p class="mb-12 text-slate-600 leading-relaxed">
                        ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ä¸€ç›´ç·šã«ã¯é€²ã¿ã¾ã›ã‚“ã§ã—ãŸã€‚ç’°å¢ƒæ§‹ç¯‰ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿æº–å‚™ã€ãƒ¢ãƒ‡ãƒ«å­¦ç¿’ã«è‡³ã‚‹ã¾ã§ã€æ§˜ã€…ãªèª²é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ä»¥ä¸‹ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã¯ã€ãã‚Œã‚‰ã®èª²é¡Œã¨è§£æ±ºç­–ã®å…¨è¨˜éŒ²ã§ã‚ã‚Šã€ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒªã‚¢ãƒ«ãªé–‹ç™ºã®é“ã®ã‚Šã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚
                    </p>
                    <div id="issue-timeline" class="relative border-l-2 border-slate-300 ml-4">
                    </div>
                </section>

                <section id="deliverables">
                    <h2 class="section-title text-3xl font-bold pb-2 mb-6 text-slate-800">æœ€çµ‚æˆæœç‰©</h2>
                    <p class="mb-8 text-slate-600 leading-relaxed">
                        æ•°ã€…ã®èª²é¡Œã‚’ä¹—ã‚Šè¶Šãˆã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯å½“åˆã®ç›®çš„ã‚’é”æˆã—ã¾ã—ãŸã€‚æœ€çµ‚çš„ãªæˆæœç‰©ã¯ã€é«˜å“è³ªãªã‚«ã‚¹ã‚¿ãƒ éŸ³å£°ãƒ¢ãƒ‡ãƒ«ã¨ãã®é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹ã‚’ä½“ç³»åŒ–ã—ãŸä¸€é€£ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç¾¤ã§ã™ã€‚
                    </p>
                    <div class="bg-white p-8 rounded-lg shadow-lg flex items-center space-x-6 border-l-4 border-teal-500">
                        <div class="text-4xl">ğŸ†</div>
                        <div>
                            <h3 class="text-2xl font-bold text-slate-800">å®Œæˆã—ãŸæˆæœç‰©</h3>
                            <ul class="mt-2 list-disc list-inside text-slate-600 space-y-1">
                                <li>å­¦ç¿’æ¸ˆã¿VITSãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ« (`.pth`)</li>
                                <li>ãƒ¢ãƒ‡ãƒ«è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« (`config.json`)</li>
                                <li>å…¨å·¥ç¨‹ã‚’è¨˜éŒ²ã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç¾¤</li>
                            </ul>
                        </div>
                    </div>
                </section>

            </main>
        </div>
    </div>

    <div id="ai-modal" class="fixed inset-0 z-50 flex items-center justify-center p-4 hidden">
        <div class="modal-bg fixed inset-0 bg-black bg-opacity-50 opacity-0"></div>
        <div class="modal-content bg-white rounded-lg shadow-2xl w-full max-w-2xl max-h-[80vh] flex flex-col transform scale-95 opacity-0">
            <div class="flex justify-between items-center p-4 border-b">
                <h3 id="modal-title" class="text-xl font-bold text-slate-800">AIã«ã‚ˆã‚‹åˆ†æçµæœ</h3>
                <button id="modal-close-btn" class="text-2xl text-slate-500 hover:text-slate-800">&times;</button>
            </div>
            <div id="modal-body" class="p-6 overflow-y-auto">
                <div class="flex justify-center items-center h-32">
                    <div class="spinner w-12 h-12 rounded-full border-4"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            const wbsData = [
                { id: 1, name: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†', children: [ { id: 1.1, name: 'è¨ˆç”»ç«‹æ¡ˆ' }, { id: 1.2, name: 'é€²æ—ãƒ»èª²é¡Œç®¡ç†' } ]},
                { id: 2, name: 'é–‹ç™ºç’°å¢ƒæ§‹ç¯‰', children: [ { id: 2.1, name: 'OSç’°å¢ƒè¨­å®š' }, { id: 2.2, name: 'Pythonãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç’°å¢ƒè¨­å®š' }, { id: 2.3, name: 'Coqui-TTSç’°å¢ƒè¨­å®š' } ]},
                { id: 3, name: 'å­¦ç¿’ãƒ‡ãƒ¼ã‚¿æº–å‚™', children: [ { id: 3.1, name: 'éŸ³å£°ãƒ‡ãƒ¼ã‚¿åé›†ãƒ»æ•´ç†' }, { id: 3.2, name: 'éŸ³å£°ãƒ‡ãƒ¼ã‚¿åŠ å·¥' }, { id: 3.3, name: 'ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä½œæˆ' } ]},
                { id: 4, name: 'ãƒ¢ãƒ‡ãƒ«å­¦ç¿’', children: [ { id: 4.1, name: 'å­¦ç¿’è¨­å®š' }, { id: 4.2, name: 'å­¦ç¿’å®Ÿè¡Œ' }, { id: 4.3, name: 'ãƒ¢ãƒ‡ãƒ«è©•ä¾¡' } ]},
                { id: 5, name: 'éŸ³å£°åˆæˆï¼ˆæ¨è«–ï¼‰', children: [ { id: 5.1, name: 'æ¨è«–å®Ÿè¡Œã¨å“è³ªè©•ä¾¡' } ]},
                { id: 6, name: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå®Œäº†', children: [ { id: 6.1, name: 'æˆæœç‰©ã®ä¿ç®¡' }, { id: 6.2, name: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æŒ¯ã‚Šè¿”ã‚Š' } ]}
            ];

            const scheduleData = [
                { task: 'é–‹ç™ºç’°å¢ƒæ§‹ç¯‰', start: '2025-07-30', end: '2025-07-30' },
                { task: 'å­¦ç¿’ãƒ‡ãƒ¼ã‚¿æº–å‚™', start: '2025-07-31', end: '2025-07-31' },
                { task: 'å­¦ç¿’è¨­å®š', start: '2025-08-01', end: '2025-08-01' },
                { task: 'å­¦ç¿’å®Ÿè¡Œ', start: '2025-08-01', end: '2025-08-07' },
                { task: 'ãƒ¢ãƒ‡ãƒ«è©•ä¾¡', start: '2025-08-08', end: '2025-08-08' },
                { task: 'éŸ³å£°åˆæˆï¼ˆæ¨è«–ï¼‰', start: '2025-08-08', end: '2025-08-08' },
                { task: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå®Œäº†', start: '2025-08-09', end: '2025-08-09' }
            ];

            const issueData = [
                { id: '001', title: '`apt update`ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼', desc: 'é€²è¡Œã«å½±éŸ¿ãªã—ã¨åˆ¤æ–­ã—ã€ä½œæ¥­ã‚’ç¶™ç¶šã€‚' },
                { id: '002', title: 'ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ãŒä¸å®Œå…¨', desc: 'ãƒ†ã‚­ã‚¹ãƒˆã‚’æ•´å½¢ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ”¹å–„ã€‚' },
                { id: '003', title: '`config.json`ã®è¨­å®šé …ç›®ä¸è¶³', desc: 'è¨­å®šç”Ÿæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä¿®æ­£ã—ã€ä¸è¶³é …ç›®ã‚’è¿½åŠ ã€‚' },
                { id: '004', title: 'ãƒ‡ãƒ¼ã‚¿å½¢å¼ã¨ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ã®ä¸æ•´åˆ', desc: 'ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ãŒæœŸå¾…ã™ã‚‹3åˆ—å½¢å¼ã«å¤‰æ›ã—ã¦è§£æ±ºã€‚' },
                { id: '005', title: 'ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®æ‹¡å¼µå­äºŒé‡ä»˜ä¸', desc: 'ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®1åˆ—ç›®ã‹ã‚‰`.wav`ã‚’å‰Šé™¤ã—ã¦è§£æ±ºã€‚' },
                { id: '006', title: '`sed`ã‚³ãƒãƒ³ãƒ‰ãŒãƒ•ã‚¡ã‚¤ãƒ«åã‚’ç ´æ', desc: 'ã‚³ãƒãƒ³ãƒ‰ã®æ¬ é™¥ã‚’ç‰¹å®šã—ã€å…¨ãƒ‡ãƒ¼ã‚¿ã‚’å†ç”Ÿæˆã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§è§£æ±ºã€‚' },
                { id: '007', title: 'ãƒ—ãƒ­ã‚°ãƒ©ãƒ å†…éƒ¨ã®ãƒ‘ã‚¹ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰å•é¡Œ', desc: 'ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ä»•æ§˜ã«åˆã‚ã›ã¦ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¨è¨­å®šã‚’ä¿®æ­£ã€‚' },
                { id: '008', title: 'ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®ã‚¹ãƒ†ãƒ¬ã‚ªéŸ³å£°æ··å…¥', desc: 'å…¨éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¼·åˆ¶çš„ã«ãƒ¢ãƒãƒ©ãƒ«ã«å†å¤‰æ›ã—ã¦è§£æ±ºã€‚' },
                { id: '009', title: '`metadata.csv`ãŒ1è¡Œã«ãªã‚‹å•é¡Œ', desc: 'ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®æ¬ é™¥ã‚’ç‰¹å®šã—ã€æ”¹è¡Œã‚’ç ´å£Šã—ãªã„Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ç½®ãæ›ãˆã¦è§£æ±ºã€‚' },
                { id: '010', title: 'ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ç ´æ', desc: 'ç ´æã—ãŸæœ€æ–°ã®ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã‚’å‰Šé™¤ã—ã€ä¸€ã¤å‰ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å­¦ç¿’ã‚’å†é–‹ã€‚' },
                { id: '011', title: 'å­¦ç¿’ãƒ­ã‚°ã®è¡¨ç¤ºå•é¡Œ', desc: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å®Œå…¨ã«ãƒªã‚»ãƒƒãƒˆã—ã€ãƒ•ã‚¡ã‚¤ãƒ«åã®ãƒªãƒãƒ¼ãƒ ã‚’å«ã‚€æœ€çµ‚ç‰ˆã®ãƒ‡ãƒ¼ã‚¿æº–å‚™ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã—ã¦è§£æ±ºã€‚' }
            ];

            const proceduresData = [
                {
                    phase: 'ä½œæ¥­å ´æ‰€ã«ã¤ã„ã¦ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆï¼‰',
                    isIntro: true,
                    description: 'ã“ã®æ‰‹é †æ›¸ã§ã¯ã€å…¨ã¦ã®ä½œæ¥­ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ›ãƒ¼ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰é–‹å§‹ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚ãƒ›ãƒ¼ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯ `~` ã§è¡¨ã•ã‚Œã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã¯ `root@hostname:~#` ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚Windows PCã®ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ï¼ˆWSL2ã‹ã‚‰ã¯ `/mnt/c/Users/[YourUsername]/Desktop`ï¼‰ã§ã‚‚å¯èƒ½ã§ã™ãŒã€ãƒ›ãƒ¼ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒä¸€èˆ¬çš„ã§ã™ã€‚'
                },
                {
                    phase: 'ãƒ•ã‚§ãƒ¼ã‚º1: ç’°å¢ƒæ§‹ç¯‰',
                    steps: [
                        { title: 'ã‚·ã‚¹ãƒ†ãƒ æ›´æ–°ã¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«', description: 'ã‚·ã‚¹ãƒ†ãƒ ã‚’æœ€æ–°åŒ–ã—ã€Pythonã‚„éŸ³å£°å‡¦ç†ã«å¿…è¦ãªãƒ„ãƒ¼ãƒ«ã‚’å°å…¥ã—ã¾ã™ã€‚', path: 'root@hostname:~#', command: 'sudo apt update && sudo apt install python3.10 python3.10-venv python3-pip git git-lfs ffmpeg kakasi -y' },
                        { title: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆã¨ç§»å‹•', description: 'ä½œæ¥­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é›†ç´„ã™ã‚‹å°‚ç”¨ã®ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆã—ã€ãã“ã«ç§»å‹•ã—ã¾ã™ã€‚', path: 'root@hostname:~#', command: 'mkdir ~/TTS_Project && cd ~/TTS_Project' },
                        { title: 'Pythonä»®æƒ³ç’°å¢ƒã®ä½œæˆã¨æœ‰åŠ¹åŒ–', description: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå°‚ç”¨ã®Pythonç’°å¢ƒã‚’åˆ†é›¢ã—ã€æœ‰åŠ¹åŒ–ã—ã¾ã™ã€‚', path: 'root@hostname:~/TTS_Project#', command: 'python3.10 -m venv tts_env\nsource tts_env/bin/activate' },
                        { title: 'TTSãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®æº–å‚™', description: 'éŸ³å£°åˆæˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªæœ¬ä½“ã¨ã€å­¦ç¿’ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æº–å‚™ã—ã¾ã™ã€‚', path: '(tts_env) root@hostname:~/TTS_Project#', command: 'pip install TTS\ngit clone https://github.com/coqui-ai/TTS.git' }
                    ]
                },
                {
                    phase: 'ãƒ•ã‚§ãƒ¼ã‚º2: ãƒ‡ãƒ¼ã‚¿æº–å‚™',
                    steps: [
                        { title: 'å…ƒãƒ‡ãƒ¼ã‚¿ç”¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ', description: 'ã‚ªãƒªã‚¸ãƒŠãƒ«ã®éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿ç®¡ã™ã‚‹ãŸã‚ã®ç½®ãå ´æ‰€ã‚’ä½œæˆã—ã¾ã™ã€‚', path: '(tts_env) root@hostname:~/TTS_Project#', command: 'mkdir -p TTS/my_ada_voice/wavs_original' },
                        { title: 'å…ƒãƒ‡ãƒ¼ã‚¿ã‚’ã‚³ãƒ”ãƒ¼', description: 'ç”¨æ„ã—ãŸéŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã®æ‰€å®šã®å ´æ‰€ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚', path: '(tts_env) root@hostname:~/TTS_Project#', command: 'cp /path/to/your/wavs/*.wav TTS/my_ada_voice/wavs_original/' },
                        { title: 'ãƒ‡ãƒ¼ã‚¿æº–å‚™ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ', description: 'éŸ³å£°ã®ãƒªãƒãƒ¼ãƒ ã¨æ•´å½¢ã€ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡ºã‚’å…¨è‡ªå‹•ã§è¡Œã†ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã™ã€‚', path: '(tts_env) root@hostname:~/TTS_Project#', command: 'cd TTS/my_ada_voice\n(tts_env) root@hostname:~/TTS_Project/TTS/my_ada_voice# python3 rebuild_metadata.py' }
                    ]
                },
                {
                    phase: 'ãƒ•ã‚§ãƒ¼ã‚º3: å­¦ç¿’',
                    steps: [
                        { title: 'è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆ', description: 'AIã«å­¦ç¿’æ–¹æ³•ã‚’æŒ‡ç¤ºã™ã‚‹è¨­è¨ˆå›³ï¼ˆconfig.jsonï¼‰ã‚’è‡ªå‹•ç”Ÿæˆã—ã¾ã™ã€‚', path: '(tts_env) root@hostname:~/TTS_Project/TTS/my_ada_voice#', command: 'cd ~/TTS_Project/TTS\n(tts_env) root@hostname:~/TTS_Project/TTS# python create_config.py' },
                        { title: 'å­¦ç¿’é–‹å§‹', description: 'ä½œæˆã—ãŸãƒ‡ãƒ¼ã‚¿ã¨è¨­å®šã‚’ä½¿ã„ã€ãƒ¢ãƒ‡ãƒ«ã®å­¦ç¿’ã‚’ã‚¼ãƒ­ã‹ã‚‰é–‹å§‹ã—ã¾ã™ã€‚', path: '(tts_env) root@hostname:~/TTS_Project/TTS#', command: 'python TTS/bin/train_tts.py --config_path configs/config_ada.json' },
                        { title: 'å­¦ç¿’å†é–‹', description: 'ä¸­æ–­ã—ãŸå­¦ç¿’ã‚’ã€ä¿å­˜ã•ã‚ŒãŸãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã‹ã‚‰å†é–‹ã—ã¾ã™ã€‚', path: '(tts_env) root@hostname:~/TTS_Project/TTS#', command: 'python TTS/bin/train_tts.py --continue_path ada-voice-model/[å­¦ç¿’ãƒ•ã‚©ãƒ«ãƒ€å]/' }
                    ]
                }
            ];

            const modal = document.getElementById('ai-modal');
            const modalBg = modal.querySelector('.modal-bg');
            const modalContent = modal.querySelector('.modal-content');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');
            const modalCloseBtn = document.getElementById('modal-close-btn');
            
            const apiKey = ""; 

            async function callGemini(prompt, maxRetries = 3) {
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                
                let chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
                const payload = { contents: chatHistory };

                for (let i = 0; i < maxRetries; i++) {
                    try {
                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }

                        const result = await response.json();
                        if (result.candidates && result.candidates.length > 0 &&
                            result.candidates[0].content && result.candidates[0].content.parts &&
                            result.candidates[0].content.parts.length > 0) {
                            return result.candidates[0].content.parts[0].text;
                        } else {
                            throw new Error('Invalid response structure from Gemini API');
                        }
                    } catch (error) {
                        if (i === maxRetries - 1) {
                            console.error('Error calling Gemini API:', error);
                            return 'AIã®åˆ†æä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã—ã°ã‚‰ãã—ã¦ã‹ã‚‰ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚';
                        }
                        await new Promise(res => setTimeout(res, Math.pow(2, i) * 1000));
                    }
                }
            }

            function showModal() {
                modal.classList.remove('hidden');
                setTimeout(() => {
                    modalBg.classList.remove('opacity-0');
                    modalContent.classList.remove('opacity-0', 'scale-95');
                }, 10);
            }

            function hideModal() {
                modalBg.classList.add('opacity-0');
                modalContent.classList.add('opacity-0', 'scale-95');
                setTimeout(() => {
                    modal.classList.add('hidden');
                }, 300);
            }
            
            modalBg.addEventListener('click', hideModal);
            modalCloseBtn.addEventListener('click', hideModal);

            function setModalLoading() {
                modalBody.innerHTML = `<div class="flex justify-center items-center h-32"><div class="spinner w-12 h-12 rounded-full border-4"></div></div>`;
            }

            function setModalContent(title, content) {
                modalTitle.textContent = title;
                modalBody.innerHTML = `<div class="prose max-w-none text-slate-700">${content.replace(/\n/g, '<br>')}</div>`;
            }

            const apiKeyErrorMessage = '<h3>AIåˆ†æã‚¨ãƒ©ãƒ¼</h3><p class="mt-4">Gemini APIã‚­ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p><p class="mt-2">ã“ã®æ©Ÿèƒ½ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§å®Ÿè¡Œã™ã‚‹ã«ã¯ã€HTMLãƒ•ã‚¡ã‚¤ãƒ«å†…ã®`callGemini`é–¢æ•°ã®ç›´å‰ã«ã‚ã‚‹`apiKey`å¤‰æ•°ã«ã€ã”è‡ªèº«ã®APIã‚­ãƒ¼ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚</p>';

            document.getElementById('generate-summary-btn').addEventListener('click', async () => {
                if (apiKey === "") {
                    setModalContent('APIã‚­ãƒ¼æœªè¨­å®š', apiKeyErrorMessage);
                    showModal();
                    return;
                }
                modalTitle.textContent = 'AIã«ã‚ˆã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç·æ‹¬ãƒ¬ãƒãƒ¼ãƒˆ';
                setModalLoading();
                showModal();

                const wbsText = wbsData.map(p => `${p.id}. ${p.name}:\n${p.children.map(c => `  - ${c.name}`).join('\n')}`).join('\n\n');
                const scheduleText = scheduleData.map(t => `- ${t.task}: ${t.start} to ${t.end}`).join('\n');
                const issuesText = issueData.map(i => `- èª²é¡Œ #${i.id} ${i.title}: ${i.desc}`).join('\n');

                const prompt = `
ã‚ãªãŸã¯å„ªç§€ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã§ã™ã€‚ä»¥ä¸‹ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã€ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãªæ—¥æœ¬èªã®ãƒã‚¹ãƒˆãƒ¢ãƒ¼ãƒ†ãƒ ï¼ˆäº‹å¾Œæ¤œè¨¼ï¼‰ãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

ãƒ¬ãƒãƒ¼ãƒˆã«ã¯ä»¥ä¸‹ã®è¦ç´ ã‚’å«ã‚ã¦ãã ã•ã„ï¼š
1.  **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦:** ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç›®çš„ã¨æˆæœã‚’ç°¡æ½”ã«è¦ç´„ã€‚
2.  **æˆåŠŸè¦å› :** è¨ˆç”»é€šã‚Šã«é€²ã‚“ã ç‚¹ã‚„ã€ç‰¹ç­†ã™ã¹ãæˆæœã‚’åˆ†æã€‚
3.  **ç›´é¢ã—ãŸèª²é¡Œã¨å­¦ã³:** ç™ºç”Ÿã—ãŸä¸»è¦ãªèª²é¡Œã‚’ã„ãã¤ã‹æŒ™ã’ã€ãã®è§£æ±ºãƒ—ãƒ­ã‚»ã‚¹ã‹ã‚‰å¾—ã‚‰ã‚ŒãŸæ•™è¨“ã‚’è¨˜è¿°ã€‚
4.  **å°†æ¥ã¸ã®æè¨€:** æ¬¡ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«æ´»ã‹ã™ã¹ãå…·ä½“çš„ãªæ”¹å–„ç‚¹ã‚’ææ¡ˆã€‚

---
**ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ãƒ¼ã‚¿ã€‘**

**1. WBSï¼ˆä½œæ¥­åˆ†è§£æ§‹æˆå›³ï¼‰**
${wbsText}

**2. ä½œæ¥­è¨ˆç”»**
${scheduleText}

**3. ç™ºç”Ÿã—ãŸèª²é¡Œä¸€è¦§**
${issuesText}
---
`;
                const result = await callGemini(prompt);
                setModalContent('AIã«ã‚ˆã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç·æ‹¬ãƒ¬ãƒãƒ¼ãƒˆ', result);
            });

            function renderWBS() {
                const list = document.getElementById('wbs-list');
                list.innerHTML = wbsData.map(item => `
                    <li>
                        <span class="wbs-toggle font-bold cursor-pointer">${item.id}. ${item.name}</span>
                        <ul class="pl-6 mt-1 hidden space-y-1">
                            ${item.children.map(child => `<li>${child.id}. ${child.name}</li>`).join('')}
                        </ul>
                    </li>
                `).join('');
                
                list.querySelectorAll('.wbs-toggle').forEach(toggle => {
                    toggle.addEventListener('click', () => {
                        toggle.classList.toggle('open');
                        toggle.nextElementSibling.classList.toggle('hidden');
                    });
                });
            }

            function renderProcedures() {
                const container = document.getElementById('procedures-container');
                container.innerHTML = proceduresData.map(phase => {
                    if (phase.isIntro) {
                        return `
                            <div class="mb-4 bg-slate-100 p-4 rounded-lg">
                                <h4 class="font-bold text-md text-slate-800 mb-2">${phase.phase}</h4>
                                <p class="text-sm text-slate-600">${phase.description}</p>
                            </div>
                        `;
                    }
                    return `
                        <div class="mb-4">
                            <h4 class="font-bold text-md text-slate-800 mb-2">${phase.phase}</h4>
                            <div class="space-y-2">
                                ${phase.steps.map((step) => {
                                    const commandWithPaths = step.command.split('\n').map(line => `<span class="code-path">${step.path}</span> ${line}`).join('\n');
                                    return `
                                    <div class="bg-slate-100 p-3 rounded-md">
                                        <p class="text-sm font-medium text-slate-700">${step.title}</p>
                                        <p class="text-xs text-slate-500 mt-1">${step.description}</p>
                                        <div class="code-block mt-2">
                                            <pre class="bg-slate-800 text-white text-xs p-3 rounded-md overflow-x-auto"><code>${commandWithPaths}</code></pre>
                                            <button class="copy-btn" data-command="${encodeURIComponent(step.command)}">ã‚³ãƒ”ãƒ¼</button>
                                        </div>
                                    </div>
                                `}).join('')}
                            </div>
                        </div>
                    `
                }).join('');

                container.addEventListener('click', (e) => {
                    if (e.target.classList.contains('copy-btn')) {
                        const command = decodeURIComponent(e.target.dataset.command);
                        const tempTextarea = document.createElement('textarea');
                        tempTextarea.value = command;
                        document.body.appendChild(tempTextarea);
                        tempTextarea.select();
                        try {
                            document.execCommand('copy');
                            e.target.textContent = 'ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼';
                            setTimeout(() => {
                                e.target.textContent = 'ã‚³ãƒ”ãƒ¼';
                            }, 2000);
                        } catch (err) {
                            console.error('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ', err);
                            e.target.textContent = 'å¤±æ•—';
                        }
                        document.body.removeChild(tempTextarea);
                    }
                });
            }

            function renderScheduleChart() {
                const ctx = document.getElementById('scheduleChart').getContext('2d');
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: scheduleData.map(d => d.task),
                        datasets: [{
                            label: 'ã‚¿ã‚¹ã‚¯æœŸé–“',
                            data: scheduleData.map(d => ({ x: [new Date(d.start), new Date(d.end)], y: d.task })),
                            backgroundColor: (context) => {
                                const tasks = scheduleData.map(d => d.task);
                                const index = tasks.indexOf(context.raw.y);
                                const colors = ['#14b8a6', '#f59e0b', '#3b82f6', '#ef4444', '#8b5cf6', '#ec4899', '#65a30d'];
                                return colors[index % colors.length];
                            },
                            borderRadius: 4, borderSkipped: false,
                        }]
                    },
                    options: {
                        indexAxis: 'y', responsive: true, maintainAspectRatio: false,
                        scales: {
                            x: {
                                type: 'time',
                                time: { unit: 'day', tooltipFormat: 'yyyy/MM/dd', displayFormats: { day: 'M/d' } },
                                min: '2025-07-29', max: '2025-08-10',
                                grid: { color: '#e2e8f0' }, ticks: { color: '#64748b' }
                            },
                            y: {
                                grid: { display: false },
                                ticks: { color: '#64748b', font: { size: 14 } }
                            }
                        },
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        const start = new Date(context.raw.x[0]).toLocaleDateString('ja-JP');
                                        const end = new Date(context.raw.x[1]).toLocaleDateString('ja-JP');
                                        return `${context.dataset.label}: ${start} - ${end}`;
                                    }
                                }
                            }
                        }
                    }
                });
            }

            function renderIssueTimeline() {
                const timeline = document.getElementById('issue-timeline');
                timeline.innerHTML = issueData.map((issue) => `
                    <div class="mb-8 flex items-start">
                        <div class="absolute -left-1.5 mt-1.5 h-3 w-3 rounded-full bg-teal-500"></div>
                        <div class="ml-6 w-full">
                            <div class="issue-card bg-white p-4 rounded-lg shadow-md border-l-teal-500">
                                <p class="font-bold text-slate-800">èª²é¡Œ #${issue.id}: ${issue.title}</p>
                                <div class="mt-2 text-slate-600 text-sm">
                                    <strong>è§£æ±ºç­–:</strong> ${issue.desc}
                                </div>
                                <button data-issue-id="${issue.id}" class="analyze-issue-btn mt-3 bg-slate-200 text-slate-700 text-xs font-bold py-1 px-3 rounded-full hover:bg-slate-300 transition-colors">
                                    âœ¨ AIã§åˆ†æ
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');

                timeline.querySelectorAll('.analyze-issue-btn').forEach(btn => {
                    btn.addEventListener('click', async (e) => {
                        if (apiKey === "") {
                            setModalContent('APIã‚­ãƒ¼æœªè¨­å®š', apiKeyErrorMessage);
                            showModal();
                            return;
                        }
                        const issueId = e.target.getAttribute('data-issue-id');
                        const issue = issueData.find(i => i.id === issueId);
                        if (!issue) return;

                        const modalTitleText = `èª²é¡Œ #${issue.id} ã®AIåˆ†æ`;
                        modalTitle.textContent = modalTitleText;
                        setModalLoading();
                        showModal();
                        
                        const prompt = `
ã‚ãªãŸã¯å„ªç§€ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼å…¼ãƒªã‚¹ã‚¯ã‚¢ãƒŠãƒªã‚¹ãƒˆã§ã™ã€‚ä»¥ä¸‹ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ç™ºç”Ÿã—ãŸèª²é¡Œã«ã¤ã„ã¦ã€ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãªè¦–ç‚¹ã‹ã‚‰æ—¥æœ¬èªã§åˆ†æã—ã¦ãã ã•ã„ã€‚

**åˆ†æå¯¾è±¡ã®èª²é¡Œ:**
- **ã‚¿ã‚¤ãƒˆãƒ«:** ${issue.title}
- **è§£æ±ºç­–ã®æ¦‚è¦:** ${issue.desc}

**åˆ†æå†…å®¹ã¨ã—ã¦ã€ä»¥ä¸‹ã®3ã¤ã®è¦ç´ ã‚’ç°¡æ½”ã«å«ã‚ã¦ãã ã•ã„:**
1.  **æ ¹æœ¬åŸå› ã®æ¨å¯Ÿ:** ã“ã®å•é¡ŒãŒèµ·ããŸçœŸã®åŸå› ã¯ä½•ã ã£ãŸã¨è€ƒãˆã‚‰ã‚Œã‚‹ã‹ã€‚
2.  **äºˆé˜²ç­–ã®ææ¡ˆ:** å°†æ¥åŒæ§˜ã®å•é¡Œã‚’é˜²ããŸã‚ã«ã€ã©ã®ã‚ˆã†ãªå¯¾ç­–ãŒè€ƒãˆã‚‰ã‚Œã‚‹ã‹ã€‚
3.  **é–¢é€£ãƒªã‚¹ã‚¯:** ã“ã®èª²é¡Œã‹ã‚‰ç™ºå±•ã—ã¦èµ·ã“ã‚Šã†ã‚‹ã€ä»–ã®æ½œåœ¨çš„ãªãƒªã‚¹ã‚¯ã¯ä½•ã‹ã€‚
`;
                        const result = await callGemini(prompt);
                        setModalContent(modalTitleText, result);
                    });
                });
            }

            function setupScrollspy() {
                const sections = document.querySelectorAll('main section');
                const navLinks = document.querySelectorAll('.nav-link');

                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            navLinks.forEach(link => {
                                link.classList.remove('active');
                                if (link.getAttribute('href').substring(1) === entry.target.id) {
                                    link.classList.add('active');
                                }
                            });
                        }
                    });
                }, { rootMargin: '-40% 0px -60% 0px' });

                sections.forEach(section => observer.observe(section));
                
                navLinks.forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const targetId = link.getAttribute('href');
                        const targetElement = document.querySelector(targetId);
                        if(targetElement) {
                            const offset = 80;
                            const bodyRect = document.body.getBoundingClientRect().top;
                            const elementRect = targetElement.getBoundingClientRect().top;
                            const elementPosition = elementRect - bodyRect;
                            const offsetPosition = elementPosition - offset;
                            
                            window.scrollTo({
                                top: offsetPosition,
                                behavior: 'smooth'
                            });
                        }
                    });
                });
            }

            renderWBS();
            renderProcedures();
            renderScheduleChart();
            renderIssueTimeline();
            setupScrollspy();
        });
    </script>
</body>
</html>
